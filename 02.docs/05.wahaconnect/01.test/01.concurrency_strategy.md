
# Estratégia de Teste de Concorrência

O objetivo principal é simular o Waha enviando múltiplas mensagens de diferentes `chatId`s simultaneamente para o webhook da nossa aplicação e verificar se cada resposta é enviada de volta para o `chatId` correto.

## Abordagem

1.  **Mock da API do Waha:** Criaremos um servidor "mock" que simula a API de envio de mensagens do Waha. Este mock terá um endpoint (ex: `/sendText`) que registrará todas as chamadas que receber (o `chatId` e a mensagem).

2.  **Disparo Concorrente de Webhooks:** Usaremos uma biblioteca de threading ou `asyncio` em Python para disparar múltiplas requisições POST concorrentes para o endpoint `/webhook` da nossa aplicação. Cada requisição simulará uma mensagem de um `chatId` único.

3.  **Verificação:** Após o disparo, vamos consultar o log do nosso mock da API do Waha para garantir que:
    *   O número de respostas recebidas pelo mock é igual ao número de mensagens enviadas.
    *   Cada `chatId` enviado nas requisições recebeu exatamente uma resposta.
    *   A resposta enviada para cada `chatId` é a resposta padrão esperada ("Obrigado, iremos analisar.").

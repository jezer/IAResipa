# Cenário: Formatação de Resposta Bem-Sucedida

- **Nome do Cenário:** `FormatResponse_Success`
- **Objetivo:** Verificar se o sistema formata corretamente um resultado de SQL em uma resposta de linguagem natural para o usuário.

---

### Pré-condições

- O serviço do Gemini está acessível.
- O nó `format_response` está implementado e conectado no grafo.
- O estado da conversa (`ReservationState`) foi preenchido por um nó anterior.

### Ação

1.  O sistema recebe uma `ReservationState` contendo:
    - `intent`: "check_availability"
    - `sql_result`: `[{"nome": "Quiosque Sol", "disponivel": true}, {"nome": "Quiosque Lua", "disponivel": true}]`
    - `response`: `null`
2.  O estado é passado para o nó `format_response`.

### Pós-condições (Resultados Esperados)

1.  O nó `format_response` invoca a API do Gemini com o prompt de formatação.
2.  O Gemini retorna uma string de linguagem natural.
3.  O nó atualiza a `ReservationState` com o seguinte valor:
    - `response`: "Os seguintes quiosques estão disponíveis: Quiosque Sol, Quiosque Lua. Qual você gostaria de reservar?" (ou uma resposta amigável similar).

### Teardown (Limpeza)

- Nenhuma ação de limpeza é necessária.

# Testes de Fluxo: Respostas Inteligentes com Gemini (09.6)

Este documento descreve os cenários de teste para a função `process_message_logic` em `py_main_processor_v2.py`, focando na interação com o Gemini para respostas inteligentes.

## Objetivo
Garantir que a integração com o Gemini para interpretar perguntas e gerar respostas (com ou sem consulta ao Supabase) funcione corretamente, conforme o fluxo 09.6.

## Função Testada
`process_message_logic(message_details: dict)` em `C:\source\IAResipa\03.src\resipaia\py_main_processor_v2.py`

## Cenários de Teste

### Cenário 1: Pergunta Simples ao Gemini (Sem Consulta ao Supabase)
- **Descrição:** O usuário faz uma pergunta que o Gemini pode responder diretamente, sem a necessidade de consultar o banco de dados.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Olá Gemini, como você está?",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta direta e inteligente do Gemini.

### Cenário 2: Pergunta ao Gemini que Requer Consulta ao Supabase (Sucesso)
- **Descrição:** O usuário faz uma pergunta que exige que o Gemini consulte o Supabase para obter informações (ex: disponibilidade de recursos).
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Qual a disponibilidade do quiosque A para amanhã?",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta formatada com os dados de disponibilidade obtidos do Supabase.

### Cenário 3: Pergunta ao Gemini que Requer Consulta ao Supabase (Sem Dados Encontrados)
- **Descrição:** O usuário faz uma pergunta que exige consulta ao Supabase, mas nenhum dado correspondente é encontrado.
- **Input `message_details`:
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Qual a disponibilidade do quiosque Z para amanhã?",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta informando que o recurso não foi encontrado ou que não há dados disponíveis para a consulta.

### Cenário 4: Falha na Resposta do Gemini
- **Descrição:** Ocorre uma falha na comunicação com a API do Gemini ou o Gemini não consegue gerar uma resposta válida.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Erro Gemini",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma mensagem informando ao usuário que não foi possível gerar uma resposta no momento.


# Testes de Fluxo: Criação de Reserva e Iniciação de Pix (09.3)

Este documento descreve os cenários de teste para a função `process_message_logic` em `py_main_processor_v2.py`, focando na criação de reservas e na iniciação do processo de pagamento Pix.

## Objetivo
Garantir que a lógica de criação de reserva provisória, geração de Pix e tratamento de confirmação/falha de pagamento funcione corretamente, conforme o fluxo 09.3.

## Função Testada
`process_message_logic(message_details: dict)` em `C:\source\IAResipa\03.src\resipaia\py_main_processor_v2.py`

## Cenários de Teste

### Cenário 1: Criação de Reserva Provisória (Sucesso)
- **Descrição:** Após a seleção de um recurso e horário, o sistema tenta criar uma reserva provisória e gerar os dados do Pix.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Confirmar reserva",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta contendo os dados do Pix (QR Code/Link/txid) para o usuário.

### Cenário 2: Criação de Reserva Provisória (Falha Interna)
- **Descrição:** O sistema falha ao criar a reserva provisória ou ao gerar os dados do Pix devido a um erro interno.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Confirmar reserva",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta informando ao usuário sobre a falha na criação da reserva e sugerindo que tente novamente ou contate o suporte.

### Cenário 3: Pagamento Pix Confirmado
- **Descrição:** O sistema recebe a confirmação de que o pagamento Pix foi realizado com sucesso.
- **Input `message_details`:
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Pagamento confirmado",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma confirmação final da reserva para o usuário.

### Cenário 4: Pagamento Pix Não Confirmado
- **Descrição:** O sistema recebe a informação de que o pagamento Pix não foi confirmado ou falhou.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Pagamento não confirmado",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma resposta informando ao usuário sobre a falha no pagamento e o cancelamento da reserva provisória.

```
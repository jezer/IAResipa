# Testes de Fluxo: Gerenciamento de Reservas Existentes (09.7)

Este documento descreve os cenários de teste para a função `process_message_logic` em `py_main_processor_v2.py`, focando no gerenciamento de reservas já existentes por parte do usuário.

## Objetivo
Garantir que a lógica de listagem, consulta, alteração e cancelamento de reservas existentes funcione corretamente, conforme o fluxo 09.7.

## Função Testada
`process_message_logic(message_details: dict)` em `C:\source\IAResipa\03.src\resipaia\py_main_processor_v2.py`

## Cenários de Teste

### Cenário 1: Usuário Solicita Gerenciar Reservas (Com Reservas Ativas)
- **Descrição:** Um usuário com reservas ativas solicita ver suas reservas.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Gerenciar reservas",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma lista das reservas ativas do usuário.

### Cenário 2: Usuário Solicita Gerenciar Reservas (Sem Reservas Ativas)
- **Descrição:** Um usuário sem reservas ativas solicita ver suas reservas.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Gerenciar reservas",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma mensagem informando que não há reservas ativas.

### Cenário 3: Usuário Seleciona Opção "Consultar" Reserva
- **Descrição:** O usuário solicita consultar os detalhes de uma reserva específica.
- **Input `message_details`:
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Consultar reserva 123",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Os detalhes da reserva selecionada.

### Cenário 4: Usuário Seleciona Opção "Alterar" Reserva (Sucesso)
- **Descrição:** O usuário solicita alterar uma reserva existente e a alteração é bem-sucedida.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Alterar reserva 123 para amanhã",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma confirmação de que a reserva foi alterada com sucesso.

### Cenário 5: Usuário Seleciona Opção "Alterar" Reserva (Falha)
- **Descrição:** O usuário tenta alterar uma reserva, mas a alteração falha (ex: data inválida, recurso indisponível).
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Alterar reserva 123 para data inválida",
    "type": "text"
  }
  ```
- **Resultado Esperado:** Uma mensagem informando a falha na alteração da reserva.

### Cenário 6: Usuário Seleciona Opção "Cancelar" Reserva
- **Descrição:** O usuário solicita cancelar uma reserva existente.
- **Input `message_details`:**
  ```json
  {
    "from": "5511999999999@c.us",
    "body": "Cancelar reserva 123",
    "type": "text"
  }
  ```
- **Resultado Esperado:** O acionamento do fluxo de Cancelamento de Reserva (09.5).


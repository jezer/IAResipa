# 02. Formatação de Resposta

## Objetivo

Após a execução da lógica de negócio (como uma consulta ao banco de dados), o sistema precisa formatar os resultados em uma resposta de linguagem natural, clara e amigável para o usuário.

## Ferramentas

- **Modelo:** `ChatGemini`
- **Prompt:** `ChatPromptTemplate` do LangChain

## Cenários de Formatação

Existem dois cenários principais para a formatação da resposta:

1.  **Resposta Direta Pré-definida:** Em alguns casos, a resposta já foi definida em uma etapa anterior (por exemplo, se o usuário não está cadastrado). Nesse caso, nenhuma formatação adicional é necessária.
2.  **Formatação de Resultados:** Quando há um resultado de uma operação (como dados de uma consulta SQL), este resultado é passado para o Gemini para ser formatado.

## Prompt de Formatação

O prompt a seguir é usado para transformar dados estruturados (como um resultado de SQL) em uma resposta textual.

```text
Formate o resultado SQL a seguir em uma resposta amigável para o usuário.

Intenção: {intent}
Resultado SQL: {sql_result}

Forneça uma resposta clara e concisa em português.
```

- **`intent`**: A intenção original do usuário (ex: `check_availability`). Isso dá contexto ao modelo sobre o que o usuário queria saber.
- **`sql_result`**: O resultado bruto da consulta ao banco de dados.

## Exemplo

- **Intenção:** `check_availability`
- **Resultado SQL:** `[{"nome": "Quiosque A", "disponivel": true}, {"nome": "Quiosque B", "disponivel": false}]`

- **Resposta Gerada (Exemplo):** "Olá! O Quiosque A está disponível para a data solicitada. O Quiosque B não está disponível."

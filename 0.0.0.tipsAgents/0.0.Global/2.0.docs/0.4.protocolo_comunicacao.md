
# 0.4. Protocolo de Comunicação Assíncrona Entre Agentes

Este documento define o padrão de comunicação **assíncrona e baseada em arquivos** entre os agentes, orquestrada pelo `agente_implementador`.

## 1. Pastas de Comunicação

Para manter uma separação clara entre o código-fonte e os dados de execução, toda a comunicação baseada em arquivos ocorre nas pastas `input/` e `output/` localizadas dentro da pasta de cada agente, em `src/`.

-   `src/{nome_do_agente}/output/{nome_do_agente_destino}/`: Pasta de saída. Um agente coloca aqui os arquivos que ele gerou para outro agente.
-   `src/{nome_do_agente}/input/{nome_do_agente_remetente}/`: Pasta de entrada. Um agente recebe aqui os arquivos que foram enviados por outro agente.

## 2. O Papel do `agente_implementador`

O `agente_implementador` é o responsável por monitorar todas as pastas `output/` dentro de `src/`. Quando um arquivo é detectado, o `agente_implementador` o move para a pasta `input/` correspondente do agente de destino.

## 3. Formato da Mensagem (Arquivo)

O arquivo de comunicação deve ser um documento Markdown (`.md`) com um cabeçalho YAML (frontmatter) contendo metadados essenciais.

```yaml
---
source_agent: "ID_DO_AGENTE_REMETENTE" # Ex: "agente_quality"
target_agent: "ID_DO_AGENTE_DESTINO"   # Ex: "agente_fluxos"
task_id: "ID_UNICO_DA_TAREFA"          # Ex: "auditoria_001_diagrama"
timestamp: "YYYY-MM-DDTHH:MM:SSZ"      # Ex: "2025-08-24T10:30:00Z"
type: "request"                        # Ou "response", "notification", etc.
# Outros metadados relevantes para a tarefa
---

# Conteúdo da Mensagem

[Corpo da mensagem em Markdown, com instruções detalhadas, dados, ou resultados.]
```

## 4. Exemplo de Fluxo de Comunicação

> **Cenário:** O `agente_quality` solicita ao `agente_fluxos` a criação de um diagrama.

1.  **`agente_quality` (Remetente):**
    *   Cria um arquivo (ex: `diagrama_auditoria.md`) com o formato de mensagem acima.
    *   Salva este arquivo em: `src/agente_quality/output/agente_fluxos/`.

2.  **`agente_implementador`:**
    *   Detecta o novo arquivo na pasta de saída do `agente_quality`.
    *   Move o arquivo `diagrama_auditoria.md` para: `src/agente_fluxos/input/agente_quality/`.

3.  **`agente_fluxos` (Destinatário):**
    *   Verifica sua pasta `input/`.
    *   Encontra o arquivo `diagrama_auditoria.md` e processa a solicitação.

Este protocolo garante uma comunicação clara, rastreável e desacoplada entre os agentes.

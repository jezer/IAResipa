# Regras Globais de Comportamento e Qualidade

Estas regras são mandatórias para todos os agentes e perfis, sem exceção.

### 1. Foco e Escopo
- **Separação Estrita de Perfis:** Nunca responda a uma solicitação fora do escopo do seu perfil ativo.
- **Recusa com Roteamento:** Ao receber uma tarefa fora de escopo, recuse de forma explícita, cite o motivo e indique o agente ou perfil correto para o tarefa.
- **Clareza sobre Limites:** Se uma regra de negócio ou parâmetro não estiver definido, a ação do agente **DEVE** ser interrompida. O agente **DEVE** documentar o fato como "Regra Não Definida" e **DEVE** solicitar esclarecimento ou propor opções, mas **NUNCA** assumir um valor padrão.

### 2. Interação e Colaboração
- **Referência Cruzada, Sem Cópia:** Um perfil pode e deve referenciar entregáveis de outros (ex: um Dev referencia as `regras-negocio.md`), mas nunca deve copiar ou reescrever o conteúdo de outro perfil.
- **Comunicação Assíncrona:** A troca de informações entre agentes ocorre exclusivamente através de pastas `input/` e `output/` dedicadas a cada agente, com a orquestração do `agente_implementador`. Detalhes em `2.0.docs/0.4.protocolo_comunicacao.md`.

### 3. Padronização de Entregáveis
- **Parâmetros Externalizados:** Todos os valores de negócio (prazos, limites, quantidades) devem ser parametrizados e gerenciados em um local central (`docs/settings.md`), nunca fixos no código ou na documentação.
- **Formatos de Arquivo:** Utilize apenas os formatos aprovados: `.md` para documentação, `.sql`/`.js`/`.py` para código, e `.drawio`/`.png` para diagramas.
- **Metadados para Auditoria:** Todos os artefatos gerados devem conter um cabeçalho (front-matter ou comentário) com, no mínimo, o `id` do perfil responsável e a versão.

### 4. Classificação Obrigatória de Agentes

Para garantir a clareza da arquitetura, todo agente DEVE ser classificado em um de dois tipos no momento de sua criação. Esta classificação define seu **papel lógico** no sistema.

-   **Agentes Globais**
    -   **Propósito:** Gerenciar o próprio sistema de agentes. Suas responsabilidades são de meta-nível, como roteamento, criação e auditoria de outros agentes.
    -   **Exemplos:** `agente_roteador`, `agente_creator`, `agente_quality`.

-   **Agentes Específicos**
    -   **Propósito:** Executar tarefas de domínio ou de negócio específicas. Eles são os "trabalhadores" do sistema.
    -   **Exemplos:** `agente_fluxos`, um futuro `agente_pagamentos`, etc.

> **Nota sobre a Localização:** A classificação acima é **lógica**. A **localização física** de todo o código-fonte e arquivos de configuração (`agent.yaml`, `prompt.md`) de **todos** os agentes é sempre dentro da pasta `src/`, conforme detalhado no documento de arquitetura de pastas.

**Restrição:** O `agente_creator` é proibido de criar um novo agente sem que o tipo (Global ou Específico) seja explicitamente definido na solicitação.

### 4.1. Padrão de Nomenclatura de Agentes

Para garantir a consistência e a clareza em toda a base de código e documentação, os nomes dos agentes devem seguir um padrão estrito:

-   **Nomes Descritivos:** Os nomes devem descrever sucintamente a função do agente (ex: `agente_roteador`, `agente_fluxos`).
-   **Sem Prefixos Numéricos:** É proibido o uso de prefixos numéricos ou de qualquer outro tipo nos nomes de pastas, arquivos ou no campo `name` dentro dos arquivos `agent.yaml`. O nome do agente serve como seu identificador único.

### 5. Princípio de Interação de Agentes

-   **Interação Restrita:** Nenhum agente DEVE interagir diretamente com outro agente, exceto os Agentes Globais que possuem regras específicas para orquestração e gerenciamento.
-   **Agentes Globais Orquestradores:** O `agente_implementador`, `agente_quality`, `agente_creator` e `agente_roteador` são os únicos agentes com permissão para iniciar ou mediar interações entre outros agentes, conforme suas responsabilidades definidas.

### 6. Canais de Comunicação

Os agentes podem se comunicar através de dois canais principais:

-   **Comunicação Assíncrona (Baseada em Arquivos):**
    *   **Propósito:** Para tarefas que geram arquivos como produto final, ou para comunicação entre agentes que não exige resposta imediata.
    *   **Mecanismo:** Utiliza pastas `input/` e `output/` e o `agente_implementador` para transferência de arquivos. Detalhes em `0.4.protocolo_comunicacao.md`.

-   **Comunicação Síncrona (Chamada Direta Python):**
    *   **Propósito:** Para requisições que exigem uma resposta imediata, como consultas rápidas ou validações.
    *   **Mecanismo:** O agente é invocado diretamente via uma função Python e retorna um valor (texto, JSON, etc.) como resposta.

**Regra:** A forma de resposta do agente (direta ou via arquivo) DEVE ser especificada na requisição.

powershell.exe -ExecutionPolicy Bypass -File C:/source/IAResipa/01.commands/compile_resipaia_library_v2.ps1

powershell.exe -ExecutionPolicy Bypass -File C:/source/IAResipa/01.commands/configure_environment.ps1

powershell.exe -ExecutionPolicy Bypass -File C:\source\IAResipa\01.commands\configure_environment_supabase.ps1

powershell.exe -ExecutionPolicy Bypass -File C:/source/IAResipa/01.commands/run_tests.ps1



powershell.exe -ExecutionPolicy Bypass -File  C:\source\IAResipa\01.commands\run_waha_receiver.ps1

 . "C:\source\IAResipa\01.commands\compile_resipaia_library_v2.ps1"

 . "C:\source\UN\unimedv3\atualizarlibrary.ps1"

 


cd C:\source\IAResipa\
. "C:\source\IAResipa\01.commands\git_auto_commit.ps1"



http://<IP_OU_HOSTNAME_DA_MAQUINA_RODANDO_PY_WAHA_RECEIVER>:<PORTA_DO_PY_WAHA_RECEIVER>/webhook
http://localhost:8000/webhook

http://host.docker.internal:8000/webhook


powershell.exe -ExecutionPolicy Bypass -File  C:\source\IAResipa\01.commands\run_waha_receiver.ps1
curl -X POST -H "Content-Type: application/json" -d "{\"event\": \"message\", \"chatId\": \"test_user@c.us\", \"body\": \"Olá do cURL!\"}" http://localhost:8000/webhook


---------------------------




  Diagnóstico do Erro Atual:


   1. Erro: NameError: name 'datetime' is not defined
       * Localização: C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:4 (na linha
         onde user_to_remove_phone é definido dentro de test_admin_removes_user).
       * Causa: O módulo datetime não está importado no arquivo de teste test_main_processor_v2.py. Isso
         provavelmente ocorreu porque o arquivo foi sobrescrito em uma etapa anterior, removendo as
         importações iniciais.
       * Sugestão de Ajuste (1): Adicionar a linha from datetime import datetime no início do arquivo
         C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py.

  ---


  Erros Pendentes (Antecipados, após a correção acima):

  Assumindo que a correção do NameError permitirá que os testes sejam executados, os seguintes erros são
  esperados com base na última execução:


   * Erro Pendente (2): AssertionError no test_user_not_registered
       * Localização Antecipada: C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:42
       * Diagnóstico Antecipado: O teste espera uma mensagem de "usuário não cadastrado", mas o sistema
         retorna "Bem-vindo de volta...". Isso indica que o número de telefone usado no teste (5511999999999)
         já está cadastrado no Supabase.


   * Erro Pendente (3): AssertionError no test_check_active_reservations_no_reservations
       * Localização Antecipada:
         C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:129
       * Diagnóstico Antecipado: A mensagem "minhas reservas" está sendo roteada para
         handle_manage_reservations em vez de check_active_reservations dentro de handle_reservation.


   * Erro Pendente (4): AssertionError no test_check_availability_no_resources
       * Localização Antecipada:
         C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:141
       * Diagnóstico Antecipado: A mensagem "opções disponíveis" está sendo roteada para handle_gemini_query
         em vez de check_availability dentro de handle_reservation.


   * Erro Pendente (5): AssertionError e invalid input syntax for type uuid no
     test_create_provisional_reservation_success
       * Localização Antecipada:
         C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:153 (e o erro de UUID em
         C:\source\IAResipa\03.src\resipaia\py_04_reservation_manager.py:56)
       * Diagnóstico Antecipado: O user_id que está sendo passado para create_provisional_reservation é o
         número de telefone (string), mas a coluna user_id na tabela reservas do Supabase espera um UUID.


   * Erro Pendente (6): AssertionError e invalid input syntax for type uuid no
     test_add_to_waiting_list_success
       * Localização Antecipada:
         C:\source\IAResipa\tests\main_processor_v2_tests\test_main_processor_v2.py:165 (e o erro de UUID em
         C:\source\IAResipa\03.src\resipaia\py_04_reservation_manager.py:107)
       * Diagnóstico Antecipado: Similar ao anterior, o user_id que está sendo passado para
         add_to_waiting_list é o número de telefone (string), mas a coluna user_id na tabela lista_espera do
         Supabase espera um UUID.